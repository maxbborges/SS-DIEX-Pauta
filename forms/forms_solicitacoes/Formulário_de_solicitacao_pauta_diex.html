<!DOCTYPE html>
<html>

<head>
	<title>Form</title>

	<link rel="stylesheet" type="text/css" href="/style-guide/css/fluig-style-guide.min.css">
	<script src="/resources/js/jquery/jquery.js"></script>
	<script src="/resources/js/jquery/jquery-ui.min.js"></script>
	<script src="/resources/js/mustache/mustache-min.js"></script>
	<script src="/style-guide/js/fluig-style-guide.min.js"></script>
	<link href="/style-guide/css/fluig-style-guide-filter.min.css" rel="stylesheet" type="text/css">
	<link href="/style-guide/css/fluig-style-guide-ratingstars.min.css" rel="stylesheet" type="text/css">
	<script src="/style-guide/js/fluig-style-guide-filter.min.js"></script>
	<script src="/style-guide/js/fluig-style-guide-ratingstars.min.js"></script>
	<script type="text/javascript" src="/webdesk/vcXMLRPC.js" charset="utf-8"></script>
	<link href='/webdesk/customresources?cid=1&resourceName=temaFormulario/0.css' type='text/css' rel='stylesheet' />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js"></script>

	<script type="text/javascript" src="./custom/custom.js"></script>
	<script type="text/javascript" src="./custom/functionsCustom.js"></script>
	<link href='./custom/custom.css' type='text/css' rel='stylesheet' />
</head>

<body class="fluig-style-guide">

	<form class="totvs-form grid vertical create-form-components ui-sortable t0" name="createFormComponents"
		style="padding-left: 10px; padding-right: 10px;">
		<div class="form-field" data-type="textbox" data-show-properties="" data-field-name="solicitante">
			<div class="form-input">
				<div class="form-group">
					<input type="hidden" class="form-control" name="solicitante" value="" placeholder=""
						data-size="big">
				</div>
			</div>
		</div>
		<div class="form-field" data-type="textbox" data-show-properties="" data-field-name="ipCadastro">
			<div class="form-input">
				<div class="form-group">
					<input type="hidden" class="form-control" name="ipCadastro" value="" placeholder="" data-size="big">
				</div>
			</div>
		</div>
		<div class="form-field" data-type="textbox" data-show-properties="" data-field-name="ipSituacao">
			<div class="form-input">
				<div class="form-group">
					<input type="hidden" class="form-control" name="ipSituacao" value="" placeholder="" data-size="big">
				</div>
			</div>
		</div>
		<div class="form-field" data-type="textbox" data-show-properties="" data-field-name="ipNumForm">
			<div class="form-input">
				<div class="form-group">
					<input type="hidden" class="form-control" name="ipNumForm" value="" placeholder="" data-size="big">
				</div>
			</div>
		</div>
		<div class="row">
			<div class='col-sm-12' style='text-align:center'>
				<h1 class="title-form-application">Solicitação de Pauta</h1>
			</div>
		</div>


		<div class="panel panel-info" id="div_00">
			<div class="panel-heading">
				<h3 class="panel-title">
					<span class="flaticon flaticon-message icon-sm"></span>
					Abertura
				</h3>
			</div>
			<div id="abertura" class="panel-collapse collapse in">
				<div class="panel-body">
					<div class="row">
						<div class="col-sm-2 form-group">
							<label class="required">Responsável(is):</label>
							<div class="radio-options">
								<div class="radio">
									<label><input type="radio" name="rdDiretoria" value="Diretoria">Ambos</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="rdDiretoria"
											value="Diretoria Executiva">Diretora</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="rdDiretoria"
											value="Diretoria Adjunta">Diretor</label>
								</div>
							</div>
						</div>
						<div class="col-sm-10 form-group">
							<label class="required">Assunto</label>
							<textarea class="form-control" rows="3" name="taAssunto" placeholder="Digite o assunto"
								data-size="big"></textarea>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-2 form-group">
							<label class="required">Prioridade</label>
							<div class="radio-options">
								<div class="radio">
									<label><input type="radio" name="rdPrioridade" value="alta">Alta</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="rdPrioridade" value="media">Média</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="rdPrioridade" value="baixa">Baixa</label>
								</div>
							</div>
						</div>
						<div class="col-sm-5 form-group">
							<label class="required">Ramal</label>
							<input type="number" class="form-control" name="ipRamal" placeholder="Digite o seu Ramal">
						</div>
						<div class="col-sm-5 form-group">
							<label class="required">Data da Pauta:</label>
							<input type="text" class="form-control date" name="ipDataPauta" id="ipDataPauta">
						</div>
					</div>
					<div class="row">
						<div class="col-sm-4">
							<label>Selecione um colaborador</label>
							<input type="zoom" class="form-control" name="zf_00_participantes" data-zoom="{
								'datasetId':'ds_protheus_gerentesAssessores',
								'displayKey':'Nome',
								'maximumSelectionLength':'1',
								'placeholder':'Selecione um colaborador',
								'fields':[{
									'field':'Nome',
									'label':'Nome',
									'visible':'true'
								},{
									'field':'Funcao',
									'label':'Função',
									'visible':'true'
								}]
							}">
						</div>
						<div class="col-sm-3">
							<label>Nome</label>
							<input type="text" name="txt_00_nome" class="form-control" readonly>
						</div>
						<div class="col-sm-3">
							<label>Função</label>
							<input type="text" name="txt_00_email" class="form-control" readonly>
						</div>
						<div class="col-sm-2">
							<button type="button" class="btn btn-primary btnadd" onclick="addParticipante(this)">
								Incluir Participante
							</button>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12">
							<table tablename="tb_00_Participantes" class="table" noaddbutton="true" nodeletebutton="true">
								<thead>
									<tr class="tableHeadRow"></tr>
								</thead>
								<tbody>
									<tr class="tableBodyRow form-input row">
										<td class="col-sm-1" style='text-align:center;'>
											<i class="fluigicon fluigicon-trash fluigicon-md" onclick="Javascript:fnWdkRemoveChild(this)" style="cursor:pointer;padding-top: 11%;"></i>
										</td>
										<td class="col-sm-6">
											<label>Nome</label>
											<input type="text" name="txt_00_nome1" class="form-control" readonly>
										</td>
										<td class="col-sm-5">
											<label>Função</label>
											<input type="text" name="txt_00_email1" class="form-control" readonly>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-info" id="div_01">
			<div class="panel-heading">
				<h3 class="panel-title">
					<span class="flaticon flaticon-message icon-sm"></span>
					Analise Secretaria Executiva
				</h3>
			</div>
			<div id="movimentar" class="panel-collapse collapse in">
				<div class="panel-body">
					<div class="row form-group">
						<div class="col-sm-2">
							<label class="required">Decisão:</label>
							<div class="radio-options">
								<div class="radio">
									<label>
										<input type="radio" name="rd_despachar" value="Sim">Para despacho</label>
								</div>
								<div class="radio">
									<label>
										<input type="radio" name="rd_despachar"
											value="Nao-corrigir">Corrigir/Remarcar</label>
								</div>
								<div class="radio">
									<label>
										<input type="radio" name="rd_despachar" value="Nao-finalizar">Finalizar</label>
								</div>
							</div>
						</div>
						<div class="col-sm-10">
							<label id="atxtMotivo">Motivo/Observações</label>
							<textarea class="form-control" rows="3" name="atxt_motivo" data-size="big"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-info" id="div_02">
			<div class="panel-heading">
				<h3 class="panel-title">
					<span class="flaticon flaticon-message icon-sm"></span>
					Controle do despacho
				</h3>
			</div>
			<div id="finalizacao" class="panel-collapse collapse in">
				<div class="panel-body">
					<div class="row">
						<div class="col-sm-3">
							<div class="form-field" data-type="radio" data-show-properties=""
								data-field-name="rdFinalizar">
								<div class="form-input">
									<div class="form-group">
										<label class="required">Despacho realizado?</label>
										<div class="radio-options">
											<div class="radio">
												<label><input type="radio" name="rdFinalizar" value="sim">Sim,
													Finalizar.</label>
											</div>
											<div class="radio">
												<label><input type="radio" name="rdFinalizar" value="simDevolutiva">Sim,
													Abrir Devolutiva</label>
											</div>
											<div class="radio">
												<label><input type="radio" name="rdFinalizar" value="nao">Não, Deixar em
													Aberto</label>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-9">
							<div class="form-field" data-type="textarea" data-show-properties=""
								data-field-name="taMotivos">
								<div class="form-input">
									<div class="form-group">
										<label>Justificativa</label>
										<textarea class="form-control" rows="3" name="taMotivos"
											placeholder="Digite o motivo" data-size="big"></textarea>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-info" id="div_03">
			<div class="panel-heading">
				<h3 class="panel-title">
					<span class="flaticon flaticon-message icon-sm"></span>
					Criar Devolutiva
				</h3>
			</div>
			<div id="movimentar" class="panel-collapse collapse in">
				<!-- trocar o ID -->
				<div class="panel-body">
					<div class="row form-group">
						<div class="col-sm-2">
							<a id="btnAbrirDespacho"><button type="button" class="btn btn-primary"
									onclick="abrirDespacho()">Abri Devolutiva</button></a>
						</div>
						<div class="col-sm-10">
							<label>Observações?</label>
							<textarea class="form-control" rows="3" name="atxt_motivo_devolutiva" placeholder=""
								data-size="big"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	<script type="text/javascript">
		var keyDown = false, ctrl = 17, vKey = 86, Vkey = 118;

		$(document).keydown(function (e) {
			if (e.keyCode == ctrl) keyDown = true;
		}).keyup(function (e) {
			if (e.keyCode == ctrl) keyDown = false;
		});

		$('[data-only-numbers]').on('keypress', function (e) {
			if (!e) {
				var e = window.event;
			}

			if (e.keyCode > 0 && e.which == 0) {
				return true;
			}

			if (e.keyCode) {
				code = e.keyCode;
			} else if (e.which) {
				code = e.which;
			}

			if (code == 46) {
				return true;
			}

			var character = String.fromCharCode(code);
			if (character == '\b' || character == ' ' || character == '\t') {
				return true;
			}
			if (keyDown && (code == vKey || code == Vkey)) {
				return (character);
			} else {
				return (/[0-9]$/.test(character));
			}
		}).on('focusout', function (e) {
			var $this = $(this);
			if ($this.val() == "") {
				return true;
			}
			$this.val($this.val().replace(/[^0-9\.]/g, ''));
		}).on('paste', function (e) {
			var $this = $(this);
			setTimeout(function () {
				$this.val($this.val().replace(/[^0-9\.]/g, ''));
			}, 5);
		});



		$('.create-form-components').on('keyup', 'input[required="required"][type="text"], input[required="required"][type="number"], input[required="required"][type="date"], textarea[required="required"]', function () {
			validationFieldsForm($(this), $(this).parents('.form-field').data('type'));
		});

		$('.create-form-components').on('change', 'input[required="required"][type="checkbox"], input[required="required"][type="radio"], select[required="required"]', function () {
			validationFieldsForm($(this), $(this).parents('.form-field').data('type'));
		});

		function validationFieldsForm(field, type) {
			if (type === "checkbox" || type === "radio") {
				if (!field.is(':checked')) {
					field.parents('.form-field').addClass('required');
				} else {
					field.parents('.form-field').removeClass('required');
				}
			} else {
				if (!field.val().trim()) {
					field.parents('.form-field').addClass('required');
				} else {
					field.parents('.form-field').removeClass('required');
				}
			}
		}

		var $zoomPreview = $(".zoom-preview");
		if ($zoomPreview.length) {
			$zoomPreview.parent().removeClass("input-group");
			$zoomPreview.remove();
		}

		var ratings = $(".rating");
		if (ratings.length > 0) ratingStars(ratings);
		function ratingStars(stars) {
			$.each(stars, function (i, obj) {
				var field = $(this).closest(".form-group").find(".rating-value");
				var tgt = $(obj);
				tgt.html("");
				var rating = FLUIGC.stars(tgt, { value: field.val() });
				rating.on("click", function (o) {
					field.val($(this).index() + 1);
				});
			});
		}

		$.each($("[data-date]"), function (i, o) {
			var id = $(o).attr("id");
			FLUIGC.calendar("#" + id);
		});

		$(document).ready(function () {
			$.each($("[data-date]"), function (i, o) {
				var id = $(o).attr("id");
				if ($("#" + id).attr("readonly")) {
					$("#" + id).data('DateTimePicker').disable();
				}
			});
		});
	</script>
</body>

</html>